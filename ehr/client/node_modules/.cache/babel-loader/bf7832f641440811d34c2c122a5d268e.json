{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\horne\\\\Documents\\\\SeniorProject\\\\ehr\\\\client\\\\src\\\\components\\\\patientTable.js\";\n// import statements\nimport React, { Component } from 'react';\n/* import '../../css/Table.css'; */\n\nimport '../assets/styles/Table.css';\nimport Axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport { Tab } from '@hospitalrun/components';\nimport Button from 'react-bootstrap/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass PatientBlock extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      patientList: [],\n      isChanged: false\n    };\n  }\n\n  editPatient(patient_id) {\n    window.location.href = '/admin/editPatient?patientID=' + patient_id;\n  }\n\n  deletePatient(patient_id) {\n    console.log(\"Delete function\");\n    Axios.delete(`http://localhost:3001/admin/deletePatient/${patient_id}`, {\n      headers: {\n        'x-access-token': sessionStorage.getItem(\"accessToken\")\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n    this.setState({\n      isChanged: true\n    });\n  }\n\n  getAllPatients() {\n    Axios.get(\"http://localhost:3001/patient/getAllPatients\", {\n      headers: {\n        'x-access-token': sessionStorage.getItem(\"accessToken\")\n      }\n    }).then(results => {\n      /* console.log(results) */\n      return results;\n    }).then(results => {\n      /* console.log(results) */\n      let patients = results.data.map(patient => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: [patient.first_name, \" \", patient.last_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: patient.medical_record_number\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"warning\",\n              className: \"editPatient\",\n              onClick: () => {\n                this.editPatient(patient.patient_id);\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"text-center\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"danger\",\n              \"data-patient_id\": patient.patient_id,\n              className: \"deletePatient\",\n              onClick: () => {\n                if (window.confirm('Are you sure you wish to delete this patient?')) this.deletePatient(patient.patient_id);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 21\n          }, this)]\n        }, patient.patient_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this);\n      });\n      this.setState({\n        patientList: patients\n      });\n      this.setState({\n        isChanged: false\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidUpdate() {\n    // Typical usage (don't forget to compare props):\n    if (this.state.isChanged == true) {\n      this.getAllPatients();\n    }\n  }\n\n  componentDidMount() {\n    this.getAllPatients();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"patientTable\",\n        className: \"table-wrapper-scroll-y my-custom-scrollbar\",\n        style: {\n          float: 'left',\n          width: '49%',\n          padding: '10px',\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            width: '100%'\n          },\n          children: \"Patient List\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"text-center\",\n              style: {\n                background: '#0065A0',\n                color: 'white'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Medical ID\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                colspan: \"2\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [this.state.patientList, this.state.patientList.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"5\",\n                children: \"No Patients\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\n; // export statements\n\nexport default PatientBlock;","map":{"version":3,"sources":["C:/Users/horne/Documents/SeniorProject/ehr/client/src/components/patientTable.js"],"names":["React","Component","Axios","Table","Tab","Button","PatientBlock","constructor","props","state","patientList","isChanged","editPatient","patient_id","window","location","href","deletePatient","console","log","delete","headers","sessionStorage","getItem","catch","error","setState","getAllPatients","get","then","results","patients","data","map","patient","first_name","last_name","medical_record_number","confirm","componentDidUpdate","componentDidMount","render","float","width","padding","marginTop","background","color","length"],"mappings":";AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA;;AACA,OAAO,4BAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,SAASC,GAAT,QAAoB,yBAApB;AACA,OAAOC,MAAP,MAAmB,wBAAnB;;;;AACA,MAAMC,YAAN,SAA2BL,SAA3B,CAAqC;AACjCM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACVC,MAAAA,WAAW,EAAE,EADH;AAEVC,MAAAA,SAAS,EAAE;AAFD,KAAb;AAIH;;AAEDC,EAAAA,WAAW,CAACC,UAAD,EAAY;AACnBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,kCAAgCH,UAAvD;AACH;;AAEDI,EAAAA,aAAa,CAACJ,UAAD,EAAa;AACtBK,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACAjB,IAAAA,KAAK,CAACkB,MAAN,CAAc,6CAA4CP,UAAW,EAArE,EACA;AACIQ,MAAAA,OAAO,EAAE;AACL,0BAAkBC,cAAc,CAACC,OAAf,CAAuB,aAAvB;AADb;AADb,KADA,EAKGC,KALH,CAKS,UAASC,KAAT,EAAgB;AACrBP,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACH,KAPD;AAQA,SAAKC,QAAL,CAAc;AAACf,MAAAA,SAAS,EAAC;AAAX,KAAd;AACH;;AAEDgB,EAAAA,cAAc,GAAG;AACbzB,IAAAA,KAAK,CAAC0B,GAAN,CAAU,8CAAV,EACA;AACIP,MAAAA,OAAO,EAAE;AACL,0BAAkBC,cAAc,CAACC,OAAf,CAAuB,aAAvB;AADb;AADb,KADA,EAMCM,IAND,CAMMC,OAAO,IAAI;AACb;AACA,aAAOA,OAAP;AACH,KATD,EAUCD,IAVD,CAUMC,OAAO,IAAI;AACf;AACA,UAAIC,QAAQ,GAAGD,OAAO,CAACE,IAAR,CAAaC,GAAb,CAAkBC,OAAD,IAAa;AAC3C,4BACI;AAAA,kCACI;AAAA,uBAAKA,OAAO,CAACC,UAAb,OAA0BD,OAAO,CAACE,SAAlC;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA,sBAAKF,OAAO,CAACG;AAAb;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAGI;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA,mCACI,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,IAAb;AAAkB,cAAA,OAAO,EAAC,SAA1B;AAAoC,cAAA,SAAS,EAAC,aAA9C;AAA4D,cAAA,OAAO,EAAG,MAAM;AAAE,qBAAKzB,WAAL,CAAiBsB,OAAO,CAACrB,UAAzB;AAAsC,eAApH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAQI;AAAI,YAAA,SAAS,EAAC,aAAd;AAAA,mCACI,QAAC,MAAD;AAAQ,cAAA,IAAI,EAAC,IAAb;AAAkB,cAAA,OAAO,EAAC,QAA1B;AAAmC,iCAAiBqB,OAAO,CAACrB,UAA5D;AAAwE,cAAA,SAAS,EAAC,eAAlF;AAAkG,cAAA,OAAO,EAAG,MAAM;AAAE,oBAAIC,MAAM,CAACwB,OAAP,CAAe,+CAAf,CAAJ,EAAqE,KAAKrB,aAAL,CAAmBiB,OAAO,CAACrB,UAA3B;AAAwC,eAAjO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBARJ;AAAA,WAASqB,OAAO,CAACrB,UAAjB;AAAA;AAAA;AAAA;AAAA,gBADJ;AAgBD,OAjBc,CAAf;AAkBA,WAAKa,QAAL,CAAc;AAAChB,QAAAA,WAAW,EAAEqB;AAAd,OAAd;AACA,WAAKL,QAAL,CAAc;AAACf,QAAAA,SAAS,EAAC;AAAX,OAAd;AACD,KAhCD,EAiCCa,KAjCD,CAiCO,UAASC,KAAT,EAAgB;AACrBP,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AAED,KApCD;AAqCH;;AACDc,EAAAA,kBAAkB,GAAG;AACjB;AACA,QAAI,KAAK9B,KAAL,CAAWE,SAAX,IAAwB,IAA5B,EAAkC;AAC9B,WAAKgB,cAAL;AACH;AAEF;;AACHa,EAAAA,iBAAiB,GAAG;AAChB,SAAKb,cAAL;AACH;;AAEDc,EAAAA,MAAM,GAAG;AACL,wBACI;AAAA,6BAEI;AAAK,QAAA,EAAE,EAAC,cAAR;AAAuB,QAAA,SAAS,EAAC,4CAAjC;AAA8E,QAAA,KAAK,EAAE;AAACC,UAAAA,KAAK,EAAE,MAAR;AAAgBC,UAAAA,KAAK,EAAE,KAAvB;AAA+BC,UAAAA,OAAO,EAAE,MAAxC;AAAgDC,UAAAA,SAAS,EAAE;AAA3D,SAArF;AAAA,gCACI;AAAI,UAAA,KAAK,EAAE;AAACF,YAAAA,KAAK,EAAC;AAAP,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEQ,QAAC,KAAD;AAAO,UAAA,OAAO,MAAd;AAAe,UAAA,QAAQ,MAAvB;AAAA,kCAEI;AAAA,mCACI;AAAI,cAAA,SAAS,EAAC,aAAd;AAA4B,cAAA,KAAK,EAAE;AAACG,gBAAAA,UAAU,EAAE,SAAb;AAAwBC,gBAAAA,KAAK,EAAE;AAA/B,eAAnC;AAAA,sCACI;AAAI,gBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAI,gBAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAI,gBAAA,KAAK,EAAC,KAAV;AAAgB,gBAAA,OAAO,EAAC,GAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAUI;AAAA,uBAEI,KAAKtC,KAAL,CAAWC,WAFf,EAIC,KAAKD,KAAL,CAAWC,WAAX,CAAuBsC,MAAvB,GAAgC,CAAhC,GAAqC,EAArC,gBAEG;AAAA,qCACI;AAAI,gBAAA,OAAO,EAAC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAVJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAFJ,qBADJ;AA8DE;;AA3I2B;;AA4IpC,C,CACD;;AACA,eAAe1C,YAAf","sourcesContent":["// import statements\r\nimport React, { Component } from 'react';\r\n/* import '../../css/Table.css'; */\r\nimport '../assets/styles/Table.css';\r\nimport Axios from 'axios';\r\nimport Table from 'react-bootstrap/Table';\r\nimport { Tab } from '@hospitalrun/components';\r\nimport Button from 'react-bootstrap/Button';\r\nclass PatientBlock extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n           patientList: [],\r\n           isChanged: false\r\n        };\r\n    }\r\n\r\n    editPatient(patient_id){\r\n        window.location.href = '/admin/editPatient?patientID='+patient_id;\r\n    }\r\n\r\n    deletePatient(patient_id) {\r\n        console.log(\"Delete function\");\r\n        Axios.delete(`http://localhost:3001/admin/deletePatient/${patient_id}`, \r\n        { \r\n            headers: {\r\n                'x-access-token': sessionStorage.getItem(\"accessToken\"),\r\n              },\r\n        }).catch(function(error) {\r\n            console.log(error);\r\n        });\r\n        this.setState({isChanged:true});\r\n    };\r\n\r\n    getAllPatients() {\r\n        Axios.get(\"http://localhost:3001/patient/getAllPatients\",\r\n        {\r\n            headers: {\r\n                'x-access-token': sessionStorage.getItem(\"accessToken\"),\r\n            },\r\n        })\r\n        .then(results => {\r\n            /* console.log(results) */\r\n            return results;\r\n        })\r\n        .then(results => {\r\n          /* console.log(results) */\r\n          let patients = results.data.map((patient) => {\r\n            return (\r\n                <tr key={patient.patient_id}>\r\n                    <td>{patient.first_name} {patient.last_name}</td>\r\n                    <td>{patient.medical_record_number}</td>\r\n                    <td className=\"text-center\">\r\n                        <Button size=\"sm\" variant=\"warning\" className=\"editPatient\" onClick={ () => { this.editPatient(patient.patient_id) } }>\r\n                                 Edit\r\n                        </Button> \r\n                    </td>\r\n                    <td className=\"text-center\">\r\n                        <Button size=\"sm\" variant=\"danger\" data-patient_id={patient.patient_id} className=\"deletePatient\" onClick={ () => { if (window.confirm('Are you sure you wish to delete this patient?')) this.deletePatient(patient.patient_id) } }>\r\n                            Delete\r\n                        </Button> \r\n                    </td>\r\n                </tr>\r\n            );\r\n          })\r\n          this.setState({patientList: patients});\r\n          this.setState({isChanged:false});   \r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n\r\n        });\r\n    }\r\n    componentDidUpdate() {\r\n        // Typical usage (don't forget to compare props):\r\n        if (this.state.isChanged == true) {\r\n            this.getAllPatients()\r\n        }\r\n        \r\n      }\r\n    componentDidMount() {\r\n        this.getAllPatients()\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n            {/* patient table */}\r\n                <div id=\"patientTable\" className=\"table-wrapper-scroll-y my-custom-scrollbar\" style={{float: 'left', width: '49%',  padding: '10px', marginTop: '20px'}}>\r\n                    <h4 style={{width:'100%'}}>Patient List</h4>\r\n                        <Table striped bordered>\r\n                            {/* table header */}\r\n                            <thead>\r\n                                <tr className=\"text-center\" style={{background: '#0065A0', color: 'white'}}>\r\n                                    <th scope=\"col\" >Name</th>\r\n                                    <th scope=\"col\" >Medical ID</th>\r\n                                    <th scope=\"col\" colspan=\"2\">Action</th>\r\n                                </tr>\r\n                            </thead>\r\n                            {/* start of patient rows */}\r\n                            <tbody>\r\n                            {\r\n                                this.state.patientList\r\n                            }\r\n                            {this.state.patientList.length > 0 ? (\"\") :\r\n                                (\r\n                                <tr>\r\n                                    <td colSpan=\"5\">\r\n                                    No Patients\r\n                                    </td>\r\n                                </tr>\r\n                                )\r\n                            }                            \r\n                            {/* <tr>\r\n                                <td><img src=\"img/MichaelScott1.png\" id='pic' />Michael Scott</td>\r\n                                <td>1245783</td>\r\n                                <td><button type=\"button\" class=\"btn btn-warning\">Edit</button></td>\r\n                                <td><button type=\"button\" class=\"btn btn-danger\">Delete</button></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><img src=\"img/original1.png\" id='pic'/>Dwight Schrute</td>\r\n                                <td>1654782</td>\r\n                                <td><button type=\"button\" class=\"btn btn-warning\">Edit</button></td>\r\n                                <td><button type=\"button\" class=\"btn btn-danger\">Delete</button></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td><img src=\"img/Jim.png\" id='pic'/>Jim Halpert</td>\r\n                                <td>1356987</td>\r\n                                <td><button type=\"button\" class=\"btn btn-warning\">Edit</button></td>\r\n                                <td><button type=\"button\" class=\"btn btn-danger\">Delete</button></td>  \r\n                            </tr>\r\n                            <tr>\r\n                                <td><img src=\"img/pam.png\" id='pic'/>Pam Beesly</td>\r\n                                <td>1024503</td>\r\n                                <td><button type=\"button\" class=\"btn btn-warning\">Edit</button></td>\r\n                                <td><button type=\"button\" class=\"btn btn-danger\">Delete</button></td>  \r\n                            </tr>\r\n                            <tr>\r\n                                <td><img src=\"img/kelly.png\" id='pic'/>Kelly Kapoor</td>\r\n                                <td>9752041</td>\r\n                                <td><button type=\"button\" class=\"btn btn-warning\">Edit</button></td>\r\n                                <td><button type=\"button\" class=\"btn btn-danger\">Delete</button></td>  \r\n                            </tr> */}\r\n                            </tbody>\r\n                        </Table>\r\n                </div>\r\n            </>\r\n        )}   \r\n};\r\n// export statements\r\nexport default PatientBlock;"]},"metadata":{},"sourceType":"module"}