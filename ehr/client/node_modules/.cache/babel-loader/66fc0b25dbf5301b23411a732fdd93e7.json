{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\horne\\\\Documents\\\\SeniorProject\\\\ehr\\\\client\\\\src\\\\components\\\\staffTable.js\";\n// import statements\nimport React, { Component } from 'react';\n/* import '../../css/Table.css'; */\n\nimport '../assets/styles/Table.css';\nimport Axios from 'axios';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport { Navigate, NavigationType } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass TableBlock extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userList: [],\n      isChanged: false\n    };\n    this.getAllUsers = this.getAllUsers.bind(this);\n  }\n\n  deleteUser(user_id) {\n    console.log(\"Delete function\");\n    Axios.delete(`http://localhost:3001/user/deleteUser/${user_id}`, {\n      headers: {\n        'x-access-token': sessionStorage.getItem(\"accessToken\")\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n    this.setState({\n      isChanged: true\n    });\n  }\n\n  editUser(user_id) {\n    window.location.href = '/admin/editUser?userId=' + user_id;\n  }\n\n  getAllUsers() {\n    Axios.get(\"http://localhost:3001/user/getAll\", {\n      headers: {\n        'x-access-token': sessionStorage.getItem(\"accessToken\")\n      }\n    })\n    /* .then(results => {\r\n        const data = JSON.parse(results)\r\n        console.log(\"NEW RESULTS: \" + data);\r\n        return results;\r\n    }) */\n    .then(results => {\n      console.log(\"getAllUsers: \" + JSON.stringify(results));\n      let users = results.data.map(user => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: [user.first_name, \" \", user.last_name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: user.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"warning\",\n              className: \"editStaff\",\n              onClick: () => {\n                this.editUser(user.user_id);\n              },\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              size: \"sm\",\n              variant: \"danger\",\n              \"data-user_id\": user.user_id,\n              className: \"deleteStaff\",\n              onClick: () => {\n                if (window.confirm('Are you sure you wish to delete this user?')) this.deleteUser(user.user_id);\n              },\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this)]\n        }, user.user_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 17\n        }, this);\n      });\n      this.setState({\n        userList: users\n      });\n      this.setState({\n        isChanged: false\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidUpdate() {\n    // Typical usage (don't forget to compare props):\n    if (this.state.isChanged == true) {\n      this.getAllUsers();\n    }\n  }\n\n  componentDidMount() {\n    this.getAllUsers();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"staffTable\",\n        className: \"table-wrapper-scroll-y my-custom-scrollbar\",\n        style: {\n          float: 'left',\n          width: '49%',\n          padding: '10px',\n          marginTop: '20px',\n          marginBottom: '50px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            width: '100%'\n          },\n          children: \"Medical Staff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          striped: true,\n          bordered: true,\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"text-center\",\n              style: {\n                background: '#0065A0',\n                color: 'white'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                children: \"Patient Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                scope: \"col\",\n                colspan: \"2\",\n                children: \"Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [this.state.userList, this.state.userList.length > 0 ? \"\" : /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: \"5\",\n                children: \"No Staff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\n; // export statements\n\nexport default TableBlock;","map":{"version":3,"sources":["C:/Users/horne/Documents/SeniorProject/ehr/client/src/components/staffTable.js"],"names":["React","Component","Axios","Table","Button","Navigate","NavigationType","TableBlock","constructor","props","state","userList","isChanged","getAllUsers","bind","deleteUser","user_id","console","log","delete","headers","sessionStorage","getItem","catch","error","setState","editUser","window","location","href","get","then","results","JSON","stringify","users","data","map","user","first_name","last_name","email","confirm","componentDidUpdate","componentDidMount","render","float","width","padding","marginTop","marginBottom","background","color","length"],"mappings":"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","sourcesContent":["// import statements\r\nimport React, { Component } from 'react';\r\n/* import '../../css/Table.css'; */\r\nimport '../assets/styles/Table.css';\r\nimport Axios from 'axios';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Navigate, NavigationType } from 'react-router-dom';\r\nclass TableBlock extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n           userList: [],\r\n           isChanged: false\r\n        };\r\n        this.getAllUsers = this.getAllUsers.bind(this);\r\n    }\r\n\r\n    deleteUser(user_id) {\r\n        console.log(\"Delete function\");\r\n        Axios.delete(`http://localhost:3001/user/deleteUser/${user_id}`, \r\n        { \r\n            headers: {\r\n                'x-access-token': sessionStorage.getItem(\"accessToken\"),\r\n              },\r\n        }).catch(function(error) {\r\n            console.log(error);\r\n        });\r\n        this.setState({isChanged:true});\r\n    };\r\n\r\n    editUser(user_id){\r\n        window.location.href = '/admin/editUser?userId='+user_id;\r\n        \r\n    }\r\n\r\n    getAllUsers() {\r\n        Axios.get(\"http://localhost:3001/user/getAll\",\r\n        {\r\n            headers: {\r\n                'x-access-token': sessionStorage.getItem(\"accessToken\"),\r\n            },\r\n        })\r\n        /* .then(results => {\r\n            const data = JSON.parse(results)\r\n            console.log(\"NEW RESULTS: \" + data);\r\n            return results;\r\n        }) */\r\n        .then(results => {\r\n          console.log(\"getAllUsers: \" + JSON.stringify(results))\r\n          let users = results.data.map((user) => {\r\n            return (\r\n                <tr key={user.user_id}>\r\n                    <td>{user.first_name} {user.last_name}</td>\r\n                    <td>{user.email}</td>\r\n                    <td>\r\n                        <Button size=\"sm\" variant=\"warning\" className=\"editStaff\" onClick={ () => { this.editUser(user.user_id) } }>\r\n                                 Edit\r\n                        </Button> \r\n                    </td>\r\n                    \r\n                    <td>\r\n                        <Button size=\"sm\" variant=\"danger\" data-user_id={user.user_id} className=\"deleteStaff\" onClick={ () => { if (window.confirm('Are you sure you wish to delete this user?')) this.deleteUser(user.user_id) } }>\r\n                            Delete\r\n                        </Button> \r\n                    </td>\r\n                </tr>\r\n            );\r\n          })\r\n          this.setState({userList: users});\r\n          this.setState({isChanged:false});   \r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n\r\n        });\r\n    }\r\n    componentDidUpdate() {\r\n        // Typical usage (don't forget to compare props):\r\n        if (this.state.isChanged == true) {\r\n            this.getAllUsers()\r\n        }\r\n        \r\n      }\r\n    componentDidMount() {\r\n        this.getAllUsers()\r\n    }\r\n    render() {\r\n        return ( \r\n        <>       \r\n        {/* beginning of staff table */}\r\n        <div id=\"staffTable\" className=\"table-wrapper-scroll-y my-custom-scrollbar\" style={{float: 'left', width: '49%', padding: '10px', marginTop: '20px', marginBottom: '50px'}}>\r\n                    <h4 style={{width:'100%'}}>Medical Staff</h4>\r\n                    <Table striped bordered>\r\n                    {/* table header */}\r\n                    <thead>\r\n                        <tr className=\"text-center\" style={{background: '#0065A0', color: 'white'}}>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Patient Name</th>\r\n                            <th scope=\"col\" colspan=\"2\" >Action</th>\r\n                        </tr>\r\n                    </thead>\r\n                    {/* beginning of nurse rows */}\r\n                    <tbody>\r\n                    {\r\n                        this.state.userList\r\n                    }\r\n                    {this.state.userList.length > 0 ? (\"\") :\r\n                        (\r\n                        <tr>\r\n                            <td colSpan=\"5\">\r\n                            No Staff\r\n                            </td>\r\n                        </tr>\r\n                        )\r\n                    }\r\n                    </tbody>\r\n                </Table>\r\n        </div>\r\n            </>\r\n        )}   \r\n};\r\n\r\n// export statements\r\nexport default TableBlock;"]},"metadata":{},"sourceType":"module"}